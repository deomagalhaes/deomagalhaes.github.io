<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafios de Lógica - Escolha sua Categoria | Deo Magalhães</title>
    <meta name="description" content="Treine seu cérebro com desafios de lógica numérica, geométrica e verbal.">
    
    <link rel="icon" type="image/png" href="../assets/favicon2.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* ESTILOS GERAIS (Mesma base de antes ) */
        :root {
            --primary-dark-blue: #2c3e50;
            --primary-vibrant-blue: #3498db;
            --text-color-dark: #2c3e50;
            --text-color-light: #566573;
            --border-color: #e2e8f0;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: #f8f9fa; color: var(--text-color-dark); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        /* CABEÇALHO E RODAPÉ (Simplificado para o exemplo) */
        #main-header { background-color: white; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-color); padding: 15px 0; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .logo-container { display: flex; align-items: center; gap: 15px; text-decoration: none; color: inherit; }
        .logo-container img { height: 50px; }
        .logo-text .name { font-size: 1.5em; font-weight: 600; }
        footer.main-footer { background-color: var(--primary-dark-blue); color: #e2e8f0; padding: 50px 0 20px 0; text-align: center; }

        /* ESTILOS DO JOGO E DAS CATEGORIAS */
        #game-wrapper {
            background-color: #E0F7FA;
            background-image: linear-gradient(to bottom, #80DEEA, #E0F7FA);
            padding: 40px 20px;
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .panel {
            width: 100%;
            max-width: 800px;
            background-color: #FFFFFF;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            padding: 40px;
            text-align: center;
            color: #003366;
            border-top: 5px solid #4A148C;
        }
        .panel h1 { font-size: 2.5em; font-weight: 700; margin-bottom: 15px; }
        .panel p { font-size: 1.2em; margin-bottom: 30px; color: #555; }

        /* TELA DE CATEGORIAS */
        #category-selection .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
        }
        .category-button {
            background-color: #fff;
            border: 2px solid #B3E5FC;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            font-weight: 600;
            color: #003366;
        }
        .category-button:hover {
            transform: translateY(-8px);
            border-color: #4A148C;
            box-shadow: 0 8px 20px rgba(74, 20, 140, 0.2);
        }

        /* TELA DO JOGO */
        .pattern-display { display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 30px; padding: 20px; background-color: #f0f4f8; border-radius: 15px; }
        .pattern-item, .option-item { width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; font-size: 2em; font-weight: 600; border-radius: 10px; }
        .pattern-item.placeholder { border: 3px dashed #90A4AE; color: #90A4AE; }
        .pattern-item.rotate-90 { transform: rotate(90deg); }
        .pattern-item.rotate-180 { transform: rotate(180deg); }
        .pattern-item.rotate-270 { transform: rotate(270deg); }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .option-button { background-color: #fff; border: 3px solid #B3E5FC; border-radius: 15px; padding: 15px; cursor: pointer; transition: all 0.3s ease; }
        .option-button:hover { transform: translateY(-5px); border-color: #4A148C; box-shadow: 0 6px 15px rgba(74, 20, 140, 0.2); }
        .option-button .option-item { margin: 0 auto; }
        
        /* PAINEL DE FEEDBACK E BOTÕES */
        .feedback-panel { padding: 15px; border-radius: 10px; margin-top: 20px; font-size: 1.1em; font-weight: 600; display: none; }
        .feedback-panel.correct { background-color: #D4EDDA; color: #155724; border: 1px solid #C3E6CB; display: block; }
        .feedback-panel.incorrect { background-color: #F8D7DA; color: #721C24; border: 1px solid #F5C6CB; display: block; }
        .feedback-panel .explanation { font-weight: 400; font-size: 0.9em; margin-top: 5px; }
        .action-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 20px; }
        .action-button { background-color: #4A148C; color: #FFFFFF; border: none; border-radius: 10px; padding: 15px 30px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: background-color 0.3s; }
        .action-button:hover { background-color: #6A1B9A; }
        .action-button.secondary { background-color: #78909c; }
        .action-button.secondary:hover { background-color: #546e7a; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Cabeçalho do Site -->
    <header id="main-header">
        <div class="header-content container">
            <a href="../index.html" class="logo-container">
                <img src="../assets/logo-deo.png" alt="Logotipo Deo Magalhães">
                <div class="logo-text">
                    <span class="name">Deo Magalhães</span>
                </div>
            </a>
        </div>
    </header>
    
    <!-- Conteúdo Principal com o Jogo -->
    <main>
        <div id="game-wrapper">
            
            <!-- TELA 1: SELEÇÃO DE CATEGORIA (Visível no início) -->
            <div id="category-selection" class="panel">
                <h1>Desafios de Lógica</h1>
                <p>Escolha uma categoria para começar a treinar seu cérebro.</p>
                <div class="category-grid">
                    <button class="category-button" data-category="numeric">Raciocínio  
Numérico</button>
                    <button class="category-button" data-category="geometric">Raciocínio  
Geométrico</button>
                    <button class="category-button" data-category="verbal">Raciocínio  
Verbal</button>
                </div>
            </div>

            <!-- TELA 2: JOGO (Escondida no início) -->
            <div id="game-container" class="panel hidden">
                <h1 id="game-title">Decifre o Padrão</h1>
                <p id="level-description">Observe a sequência e escolha a opção que a completa corretamente.</p>
                <div class="pattern-display" id="pattern-container"></div>
                <p>Qual o próximo item da sequência?</p>
                <div class="options-grid" id="options-container"></div>
                <div id="feedback-panel" class="feedback-panel"></div>
                <div class="action-buttons">
                    <button id="back-to-categories" class="action-button secondary">Voltar</button>
                    <button id="next-level-button" class="action-button hidden">Próximo Nível</button>
                </div>
            </div>

        </div>
    </main>

    <!-- Rodapé do Site -->
    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 Deo Magalhães - Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        // --- BANCO DE NÍVEIS POR CATEGORIA ---
        const allLevels = {
            numeric: [
                { type: 'number', pattern: [2, 4, 6], options: [7, 8, 10], answer: 8, explanation: 'O padrão é somar 2 a cada número (2, 4, 6, 8...).' },
                { type: 'number', pattern: [20, 17, 14], options: [12, 10, 11], answer: 11, explanation: 'O padrão é subtrair 3 de cada número (20, 17, 14, 11...).' },
                { type: 'number', pattern: [1, 3, 9], options: [12, 18, 27], answer: 27, explanation: 'O padrão é multiplicar o número anterior por 3 (1, 3, 9, 27...).' },
                { type: 'number', pattern: [1, 1, 2, 3, 5], options: [6, 8, 7], answer: 8, explanation: 'Sequência de Fibonacci: cada número é a soma dos dois anteriores (3+5=8).' },
                { type: 'number', pattern: [4, 9, 16, 25], options: [30, 36, 49], answer: 36, explanation: 'A sequência é de quadrados perfeitos (2², 3², 4², 5², 6²=36).' },
            ],
            geometric: [
                { type: 'shape', pattern: ['■', '▲', '●'], options: ['●', '■', '▲'], answer: '■', explanation: 'A sequência de formas (quadrado, triângulo, círculo) se repete.' },
                { type: 'color', pattern: ['#E57373', '#81C784', '#64B5F6'], options: ['#81C784', '#FFF176', '#E57373'], answer: '#E57373', explanation: 'A sequência de cores (vermelho, verde, azul) se repete.' },
                { type: 'rotation', pattern: ['↑', '→', '↓'], options: ['↑', '←', '→'], answer: '←', explanation: 'A seta gira 90 graus no sentido horário a cada passo.' },
                { type: 'shape', pattern: ['+', '×', '+'], options: ['×', '+', '–'], answer: '×', explanation: 'A sequência de formas alterna entre + e ×.' },
                { type: 'shape', pattern: ['⬬', '⬭', '⬮'], options: ['⬯', '⬬', '⚫'], answer: '⬯', explanation: 'A forma "estica" horizontalmente, depois verticalmente, e repete.' },
            ],
            verbal: [
                { type: 'mixed', pattern: ['A1', 'B2', 'C3'], options: ['D4', 'C4', 'D3'], answer: 'D4', explanation: 'A letra segue a ordem alfabética e o número incrementa em 1.' },
                { type: 'letter', pattern: ['A', 'C', 'E', 'G'], options: ['H', 'I', 'J'], answer: 'I', explanation: 'A sequência pula uma letra do alfabeto a cada passo (A, B, C, D, E...).' },
                { type: 'letter', pattern: ['Z', 'Y', 'X'], options: ['W', 'A', 'V'], answer: 'W', explanation: 'A sequência segue o alfabeto em ordem inversa.' },
                { type: 'mixed', pattern: ['Z1', 'Y2', 'X3'], options: ['W4', 'A4', 'V4'], answer: 'W4', explanation: 'A letra segue o alfabeto reverso e o número incrementa em 1.' },
                { type: 'letter', pattern: ['J', 'F', 'M', 'A'], options: ['M', 'S', 'O'], answer: 'M', explanation: 'A sequência representa a inicial dos meses do ano (Janeiro, Fevereiro, Março, Abril, Maio...).' },
            ]
        };

        // --- VARIÁVEIS DE ESTADO DO JOGO ---
        let currentCategoryLevels = [];
        let currentLevelIndex = 0;
        let gameLocked = false;

        // --- SELEÇÃO DOS ELEMENTOS DO DOM ---
        const categorySelectionScreen = document.getElementById('category-selection');
        const gameContainerScreen = document.getElementById('game-container');
        const gameTitle = document.getElementById('game-title');
        const patternContainer = document.getElementById('pattern-container');
        const optionsContainer = document.getElementById('options-container');
        const feedbackPanel = document.getElementById('feedback-panel');
        const nextLevelButton = document.getElementById('next-level-button');
        const backToCategoriesButton = document.getElementById('back-to-categories');

        // --- FUNÇÕES DE CONTROLE DE TELA ---
        function showGameScreen() {
            categorySelectionScreen.classList.add('hidden');
            gameContainerScreen.classList.remove('hidden');
        }

        function showCategoryScreen() {
            gameContainerScreen.classList.add('hidden');
            categorySelectionScreen.classList.remove('hidden');
        }

        // --- LÓGICA DO JOGO ---
        function startGame(category, title) {
            currentCategoryLevels = allLevels[category];
            currentLevelIndex = 0;
            gameTitle.textContent = title;
            showGameScreen();
            loadLevel(currentLevelIndex);
        }

        function createItemElement(item, type) {
            const element = document.createElement('div');
            element.className = 'pattern-item';
            if (type === 'color') {
                element.style.backgroundColor = item;
            } else {
                element.textContent = item;
            }
            return element;
        }

        function loadLevel(levelIndex) {
            gameLocked = false;
            const level = currentCategoryLevels[levelIndex];

            patternContainer.innerHTML = '';
            optionsContainer.innerHTML = '';
            feedbackPanel.className = 'feedback-panel';
            nextLevelButton.classList.add('hidden');

            level.pattern.forEach(item => {
                patternContainer.appendChild(createItemElement(item, level.type));
            });
            const placeholder = document.createElement('div');
            placeholder.className = 'pattern-item placeholder';
            placeholder.textContent = '?';
            patternContainer.appendChild(placeholder);

            level.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-button';
                const optionElement = createItemElement(option, level.type);
                optionElement.classList.add('option-item');
                button.appendChild(optionElement);
                button.onclick = () => checkAnswer(option, level);
                optionsContainer.appendChild(button);
            });
        }

        function checkAnswer(selectedOption, level) {
            if (gameLocked) return;
            gameLocked = true;

            if (selectedOption === level.answer) {
                let feedbackMessage = `<strong>Correto!</strong> <div class="explanation">${level.explanation}</div>`;
                if (currentLevelIndex < currentCategoryLevels.length - 1) {
                    nextLevelButton.classList.remove('hidden');
                } else {
                    feedbackMessage += ' <strong>Parabéns, você completou todos os desafios desta categoria!</strong>';
                    nextLevelButton.textContent = 'Jogar Novamente';
                    nextLevelButton.classList.remove('hidden');
                }
                feedbackPanel.className = 'feedback-panel correct';
                feedbackPanel.innerHTML = feedbackMessage;
            } else {
                feedbackPanel.className = 'feedback-panel incorrect';
                feedbackPanel.innerHTML = `<strong>Incorreto.</strong> Tente novamente! <div class="explanation">Dica: ${level.explanation}</div>`;
                setTimeout(() => {
                    gameLocked = false;
                    feedbackPanel.className = 'feedback-panel';
                }, 3000);
            }
        }

        // --- EVENT LISTENERS (OUVINTES DE EVENTOS) ---
        document.querySelectorAll('.category-button').forEach(button => {
            button.addEventListener('click', () => {
                const category = button.dataset.category;
                const title = button.innerHTML.replace('  ', ' ');
                startGame(category, title);
            });
        });

        backToCategoriesButton.addEventListener('click', showCategoryScreen);

        nextLevelButton.addEventListener('click', () => {
            if (currentLevelIndex < currentCategoryLevels.length - 1) {
                currentLevelIndex++;
            } else {
                currentLevelIndex = 0; // Reinicia a categoria
            }
            loadLevel(currentLevelIndex);
            nextLevelButton.textContent = 'Próximo Nível';
        });

    });
    </script>
</body>
</html>
